
# AI痛风饮食助手 – 网页开发需求文档（PRD）

## 1. 项目背景  
- 痛风/高尿酸人群快速增长，且年轻化趋势明显。  
- 用户痛点：吃饭时无法快速判断嘌呤风险，缺乏简洁直观的工具。  
- 产品目标：提供一个极简的网页版工具，核心功能是 **一键拍照/上传 → 嘌呤风险判定**，并逐步扩展为健康管理平台。  

---

## 2. 产品目标  
1. 降低门槛：未登录即可使用核心功能（食物识别 + 嘌呤判定）。  
2. 登录用户可保存尿酸记录、趋势分析。  
3. 响应式适配（PC端 + 手机端）。  
4. MVP 优先上线，未来功能预留入口。  

---

## 3. 页面需求  

### 3.1 首页（MVP）  
- 页面中央一个大按钮：  
  - 按钮文字：“拍照 / 上传食物”  
  - 按钮样式：蓝紫渐变背景、圆角矩形、相机图标  
- 按钮下方一行说明文字：“一键识别，检测嘌呤风险”  
- 上传后 → 结果卡片：  
  - 绿色：能吃  
  - 黄色：少吃  
  - 红色：别吃  
  - 附带一句简短提示（如“嘌呤偏高，建议多喝水”）  
- 导航：Logo + 导航项（尿酸记录 / 我的）  
- 响应式适配：  
  - PC：居中偏上  
  - 移动端：全宽大按钮，底部 Tab 导航  

### 3.2 尿酸记录页  
- 输入框：输入数值 + “记录”按钮  
- 趋势图：折线图，绿色趋势线，红色虚线标记目标 <6 mg/dL  
- 存储策略：  
  - 未登录用户 → LocalStorage  
  - 登录用户 → 数据库存储  

### 3.3 我的 / 未来功能页  
- 网格卡片布局，每张卡片：配图/图标 + 标题 + 一句话说明 + 灰色按钮“即将推出”  
- 功能占位：  
  - 智能饮食记录  
  - 天气健康预警  
  - 健康社区  
  - 智能提醒系统  
- 点击未上线功能 → 弹窗提示“功能开发中，敬请期待”  

---

## 4. 功能需求  

### 4.1 MVP必做  
- 上传图片 → 通义千问 VL-Max 识别 → 返回食物名称  
- 查询 Supabase 数据库 → 返回嘌呤风险判定  
- 展示结果卡片（颜色+判定）  
- 尿酸记录 + 趋势图  
- 响应式适配  

### 4.2 可延后功能  
- 天气 API 接入（和风天气 / OpenWeatherMap）  
- 饮食记录（手动/拍照）  
- 健康社区（打卡、排行榜）  
- AI预测模型（基于历史数据预测发作风险）  

---

## 5. 技术方案  

- **前端**：Next.js / React + Tailwind CSS  
- **后端**：Node.js + Express  
- **数据库**：Supabase（云端 Postgres，支持 Auth + REST API）  
- **识图模型**：通义千问 VL-Max  
- **可视化**：Chart.js / ECharts  

---

## 6. 通义千问 VL-Max 接入说明  

- **模型名称**：通义千问 VL-Max (`qwen-vl-max`)  
- **功能**：大规模视觉语言模型，支持图片识别/理解，最适合做食物识别  
- **接口文档**：  
  - API 管理台：https://bailian.console.aliyun.com/?tab=api#/api  
  - 文档中心：https://bailian.console.aliyun.com/?tab=doc#/doc  
- **调用方式**：  
  - REST API（推荐 POST 请求，支持图片 URL/Base64 输入）  
  - SDK：Python / Node.js 官方 SDK  
- **输入**：  
  - 图片（上传的照片 → 转成 URL 或 Base64）  
  - 可附带提示词（如“请识别食物名称”）  
- **输出**：  
  - JSON 格式，包含识别结果文字（如 `"识别结果": "羊肉串"`）  
- **业务逻辑**：  
  1. 前端上传图片 → 后端调用 VL-Max API  
  2. API 返回食物名称 → 查询 Supabase 表 `food_library`  
  3. 如果存在 → 返回嘌呤风险（能吃/少吃/别吃）  
  4. 如果不存在 → 返回提示“数据库暂无，请手动搜索” + 相似分类推荐  

---

## 7. 数据库设计（Supabase）  

### 表：food_library  
| 字段         | 类型   | 说明                   |  
|--------------|--------|------------------------|  
| id           | UUID   | 主键                   |  
| name_cn      | Text   | 中文名称               |  
| category     | Text   | 分类（肉类/饮品/蔬菜） |  
| purine_level | Enum   | 嘌呤风险（low/mid/high） |  
| purine_mg    | Float  | 嘌呤含量 mg/100g       |  

### 表：uric_acid_records  
| 字段        | 类型      | 说明             |  
|-------------|-----------|------------------|  
| id          | UUID      | 主键             |  
| user_id     | UUID      | 用户ID           |  
| value       | Float     | 尿酸值 (mg/dL)   |  
| created_at  | Timestamp | 记录时间         |  

---

## 8. 非功能性需求  
- **性能**：上传识别耗时 <3 秒  
- **兼容性**：支持 Chrome / Safari / Edge，手机端 H5  
- **安全性**：用户数据加密存储，API Key 安全管理  
- **可扩展性**：预留接口支持未来功能  

---

## 9. 开发里程碑  
- 第1周：搭建前端+后端框架，接入 Supabase  
- 第2周：实现首页上传 → VL-Max 识别 → 嘌呤判定  
- 第3周：开发尿酸记录页 + 趋势图  
- 第4周：响应式适配，优化交互  
- 第5周：测试 + 部署 + 答辩材料准备  
